# Story map one thread

**Активности (верхняя линия):**\
Вход и выбор роли → Ожидание в очереди → Мэтч и подтверждение старта → Диалог по
шагам → Тайм‑ауты/сбои → Завершение и возврат

**Задачи (под активностями):**

story_map:

- activity: "Вход и выбор роли"

  tasks:
  - "открыть сайт на телефоне (портрет)"
  - "показать экран выбора пола"
  - "выбрать «Мужской / Женский»"
  - "сохранить роль в сессии"

- activity: "Ожидание в очереди"

  tasks:
  - "показать экран ожидания «Вы в очереди»"
  - "ждать пользователя противоположного пола"
  - "показать индикатор ожидания"
  - "кнопка «Отмена» возвращает к экрану «начать поиск»"

- activity: "Мэтч и подтверждение старта"

  tasks:
  - "создать сессию при наличии пары"
  - "экран «Партнёр найден»"
  - "кнопка Start активируется"
  - "кнопка «Отмена» возвращает к экрану «начать поиск»"
  - "старт только после нажатия обоими"
  - "показать состояние «жду второго»"

- activity: "Диалог по шагам"

  tasks:
  - "луп-видео партнёра; на шаге отдельные видео для М/Ж, если пусто — оставить предыдущее"
  - "плавающий бабл с репликой"
  - "кнопки вариантов ответа"
  - "состояния «мой ход / жду»"
  - "выбор → синхронный переход на следующий шаг"
  - "после выбора видео обновляется только у роли, для которой оно задано"

- activity: "Тайм-ауты/сбои"

  tasks:
  - "30s без активности → предупреждение"
  - "ещё 30s → завершение"
  - "обработка отвалов/дисконнекта"

- activity: "Завершение и возврат"

  tasks:
  - "экран «Сессия завершена»"
  - "кнопка «В очередь»"
  - "сброс состояния шага"
  - "возврат в очередь"
