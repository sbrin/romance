# API Layer

## Назначение

Минимальные helpers для HTTP запросов и ошибок, чтобы централизовать валидацию
ответов через Zod и единообразно обрабатывать ошибки. Включает thin-wrapper
для `POST /role` без бизнес-логики.

## Требования

- Все ответы парсятся через Zod-схемы из `@romance/shared`.
- Ошибки сети/ответов оформляются в `ApiError`.
- Helper `syncRoleSelection` отвечает только за валидацию payload и вызов `POST /role`.
- Helper `sendBeaconJson` используется только для fire-and-forget запросов при
  закрытии вкладки (без бизнес-логики).
- Никакой бизнес-логики в API-слое.

## Обоснование

Слои UI и state остаются «тонкими», а IO-валидация не размазывается по фичам.
